# sandbox-path-alias

## requirements

- Node v20

## how to run

```
npm ci
npm run start # samples it works
npm run broken # samples it does not work
```

# what is this?

There are several ways to alias import paths. The purpose of this repository is to see how to express them, their expressiveness, and their interoperability.

## Expressiveness

| Tool and conditions                                                                                               | Prefix replacement `"@/"` -> `"./src/"` | Exact replacement `"libfoo"` -> `"libbar"` | Capture(single⚠️、multiple✅) | RegExp | note                                                                                                                                                                                                                                                                                                                                                                |
| ----------------------------------------------------------------------------------------------------------------- | --------------------------------------- | ------------------------------------------ | ----------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Node.js ESM                                                                                                       | ✅[^Node]                               | ✅                                         | ⚠️                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Node.js CJS                                                                                                       | ✅[^Node]                               | ✅                                         | ⚠️                            | ❌     | Extension guessing does not work                                                                                                                                                                                                                                                                                                                                    |
| Bun                                                                                                               | ✅                                      | ✅                                         | ⚠️                            | ❌     | tsconfig                                                                                                                                                                                                                                                                                                                                                            |
| Deno (application)                                                                                                | ✅                                      | ✅                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Deno (library)                                                                                                    | ❌                                      | ❌                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| TypeScript                                                                                                        | ✅                                      | ✅                                         | ⚠️                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| TypeScript next(v5.4.0-dev.20240117)                                                                              | ✅[^Node]                               | ✅                                         | ⚠️                            | ❌     | Node.js (imports field)                                                                                                                                                                                                                                                                                                                                             |
| Flow                                                                                                              | ✅                                      | ✅                                         | ✅                            | ✅     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Webpack + resolve.alias                                                                                           | ✅                                      | ✅                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Webpack + NormalModuleReplacementPlugin                                                                           | ✅                                      | ✅                                         | ✅                            | ✅     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Webpack + [tsconfig-paths-webpack-plugin](https://www.npmjs.com/package/tsconfig-paths-webpack-plugin)            | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig via tsconfig-paths                                                                                                                                                                                                                                                                                                                                   |
| Rollup + [@rollup/plugin-alias](https://www.npmjs.com/package/@rollup/plugin-alias)                               | ✅                                      | ✅                                         | ✅                            | ✅     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Rollup + [@rollup/plugin-typescript](https://www.npmjs.com/package/@rollup/plugin-typescript)                     | ✅                                      | ✅                                         | ⚠️                            | ❌     | tsconfig via typescript                                                                                                                                                                                                                                                                                                                                             |
| esbuild                                                                                                           | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig [:link:](https://github.com/evanw/esbuild/blob/a652e730ff07b9081470ef6965f3d54daa7b2aab/internal/resolver/resolver.go#L2018)                                                                                                                                                                                                                         |
| esbuild + --alias                                                                                                 | ✅                                      | ❌                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| SWC                                                                                                               | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig [:link:](https://github.com/swc-project/swc/blob/c7236cf07737655c54559cc7889a26018eb1c02a/crates/swc_ecma_loader/src/resolvers/tsc.rs#L32)                                                                                                                                                                                                           |
| Babel + babel-plugin-module-resolver                                                                              | ✅                                      | ✅                                         | ✅                            | ✅     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Next.js                                                                                                           | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig,jsconfig [:link:webpack](https://github.com/vercel/next.js/blob/2096dfa687be61953fe7ccc6b54deea313a517d9/packages/next/src/build/webpack/plugins/jsconfig-paths-plugin.ts#L165-L170), or [:link:turbopack](https://github.com/vercel/turbo/blob/734c764c61da9d6493f0d6616d10ec58702eafd1/crates/turbopack-ecmascript/src/typescript/resolve.rs#L260) |
| Vite + resolve.alias                                                                                              | ✅                                      | ✅                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Vite + vite-tsconfig-paths                                                                                        | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig via [tsconfck](https://www.npmjs.com/package/tsconfck) and resolve itself [:link:](https://github.com/aleclarson/vite-tsconfig-paths/blob/ca4e2aa7f3be36facbce0305cc145f9d5f9693d1/src/mappings.ts#L8)                                                                                                                                               |
| Remix                                                                                                             | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig via esbuild? [:link:](https://remix.run/docs/en/main/discussion/introduction#compiler)                                                                                                                                                                                                                                                               |
| Nuxt                                                                                                              | ✅                                      | ✅                                         | ❌                            | ❌     |                                                                                                                                                                                                                                                                                                                                                                     |
| Jest                                                                                                              | ✅                                      | ✅                                         | ✅                            | ✅     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Vitest                                                                                                            | ✅                                      | ✅                                         | ❌                            | ❌     | see Vite                                                                                                                                                                                                                                                                                                                                                            |
| ESLint + [eslint-import-resolver-alias](https://www.npmjs.com/packages/eslint-import-resolver-alias)              | ✅                                      | ✅                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| ESLint + [eslint-import-resolver-typescript](https://www.npmjs.com/package/eslint-import-resolver-typescript)     | ✅                                      | ✅                                         | ⚠️                            | ❌     | parse tsconfig and resolve via [get-tsconfig](https://www.npmjs.com/package/get-tsconfig)                                                                                                                                                                                                                                                                           |
| ESLint + [eslint-plugin-resolver-webpack](https://www.npmjs.com/package/eslint-plugin-resolver-webpack)           | ✅                                      | ✅                                         | ⚠️                            | ❌     | webpack + resolve.alias                                                                                                                                                                                                                                                                                                                                             |
| ESLint + [eslint-import-resolver-babel-module](https://www.npmjs.com/package/eslint-import-resolver-babel-module) | ✅                                      | ✅                                         | ⚠️                            | ❌     | babel-plugin-module-resolver                                                                                                                                                                                                                                                                                                                                        |
| Biome Linter                                                                                                      | ❌                                      | ❌                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |
| Oxlint                                                                                                            | ❌                                      | ❌                                         | ❌                            | ❌     | -                                                                                                                                                                                                                                                                                                                                                                   |

[^Node]: Must be a path that starts with `#` and does not start with `#/`
